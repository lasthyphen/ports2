"use strict";var C=Object.create;var h=Object.defineProperty,m=Object.defineProperties,b=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,_=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var u=(t,e,n)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f=(t,e)=>{for(var n in e||(e={}))v.call(e,n)&&u(t,n,e[n]);if(p)for(var n of p(e))j.call(e,n)&&u(t,n,e[n]);return t},M=(t,e)=>m(t,g(e));var D=(t,e)=>{for(var n in e)h(t,n,{get:e[n],enumerable:!0})},d=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of W(e))!v.call(t,a)&&a!==n&&h(t,a,{get:()=>e[a],enumerable:!(s=b(e,a))||s.enumerable});return t};var O=(t,e,n)=>(n=t!=null?C(_(t)):{},d(e||!t||!t.__esModule?h(n,"default",{value:t,enumerable:!0}):n,t)),V=t=>d(h({},"__esModule",{value:!0}),t);var K={};D(K,{InterpreterStatus:()=>c.InterpreterStatus,assign:()=>c.assign,createMachine:()=>c.createMachine,interpret:()=>c.interpret,unwrapRefs:()=>x,useCreateMachine:()=>I,useMachine:()=>z});module.exports=V(K);var i=O(require("react")),c=require("@xstate/fsm"),E=require("@reach/utils"),k=t=>{let e;return t.subscribe(n=>{e=n}).unsubscribe(),e};function z(t,e,n){let s=i.useRef(t),a=(0,E.useConstant)(()=>(0,c.interpret)(s.current).start()),S=i.useRef(null),[r,R]=i.useState(()=>k(a)),l=i.useCallback(T=>{let o=(0,E.isString)(T)?{type:T}:T,y=x(e);a.send(M(f({},o),{lastEventType:S.current,refs:y})),S.current=o.type},[n]);return i.useEffect(()=>(a.subscribe(function(o){o.changed&&R(o)}),()=>{a.stop()}),[a]),i.useEffect(()=>{},[n,r]),[i.useMemo(()=>M(f({},r),{matches:T=>T===r.value}),[r.changed,r.context,r.value]),l,a]}function x(t){return Object.entries(t).reduce((e,[n,s])=>(e[n]=s.current,e),{})}function I(t,e){return(0,E.useConstant)(()=>(0,c.createMachine)(t,e))}0&&(module.exports={InterpreterStatus,assign,createMachine,interpret,unwrapRefs,useCreateMachine,useMachine});
