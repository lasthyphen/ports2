"use strict";var jt=Object.create;var nt=Object.defineProperty,Qt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptor,$t=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertyNames,ut=Object.getOwnPropertySymbols,Xt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var Dt=(e,t,a)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,L=(e,t)=>{for(var a in t||(t={}))ht.call(t,a)&&Dt(e,a,t[a]);if(ut)for(var a of ut(t))Ot.call(t,a)&&Dt(e,a,t[a]);return e},h=(e,t)=>Qt(e,$t(t));var F=(e,t)=>{var a={};for(var n in e)ht.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&ut)for(var n of ut(e))t.indexOf(n)<0&&Ot.call(e,n)&&(a[n]=e[n]);return a};var Zt=(e,t)=>{for(var a in t)nt(e,a,{get:t[a],enumerable:!0})},It=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of zt(t))!ht.call(e,l)&&l!==a&&nt(e,l,{get:()=>t[l],enumerable:!(n=Jt(t,l))||n.enumerable});return e};var te=(e,t,a)=>(a=e!=null?jt(Xt(e)):{},It(t||!e||!e.__esModule?nt(a,"default",{value:e,enumerable:!0}):a,e)),ee=e=>It(nt({},"__esModule",{value:!0}),e);var be={};Zt(be,{Listbox:()=>Vt,ListboxArrow:()=>At,ListboxButton:()=>Kt,ListboxGroup:()=>Ft,ListboxGroupLabel:()=>mt,ListboxInput:()=>wt,ListboxList:()=>Rt,ListboxOption:()=>Gt,ListboxPopover:()=>kt,useListboxContext:()=>re});module.exports=ee(be);var o=te(require("react")),yt=require("@reach/auto-id"),xt=require("@reach/popover"),C=require("@reach/descendants"),i=require("@reach/utils"),Lt=require("@reach/machine");var A=require("@reach/machine"),Mt=require("@reach/utils");var st=(0,A.assign)({navigationValue:null}),s=(0,A.assign)({typeaheadQuery:null}),f=(0,A.assign)({value:(e,t)=>t.value}),ae=(0,A.assign)({value:(e,t)=>e.initialValue}),D=(0,A.assign)({navigationValue:(e,t)=>t.value}),X=(0,A.assign)({navigationValue:e=>{var a;let t=ie(e.value,e.options);return t&&!t.disabled?e.value:((a=e.options.find(n=>!n.disabled))==null?void 0:a.value)||null}});function dt(e,t){if(t.type==="BLUR"){let{list:a,popover:n}=t.refs,{relatedTarget:l}=t,r=(0,Mt.getOwnerDocument)(n);return!!((r==null?void 0:r.activeElement)!==a&&n&&!n.contains(l||(r==null?void 0:r.activeElement)))}return!1}function Q(e,t){if(t.type==="OUTSIDE_MOUSE_DOWN"||t.type==="OUTSIDE_MOUSE_UP"){let{button:a,popover:n}=t.refs,{relatedTarget:l}=t;return!!(l!==a&&a&&!a.contains(l)&&n&&!n.contains(l))}return!1}function j(e,t){return!!e.options.find(a=>a.value===e.navigationValue)}function bt(e,t){let{popover:a,list:n}=t.refs,{relatedTarget:l}=t;return a&&l&&a.contains(l)&&l!==n?!1:j(e,t)}function O(e,t){requestAnimationFrame(()=>{t.refs.list&&t.refs.list.focus()})}function b(e,t){t.refs.button&&t.refs.button.focus()}function at(e,t){return!t.disabled}function oe(e,t){return"isControlled"in t?!t.isControlled:!1}function H(e,t){return!(t.type==="OPTION_TOUCH_START"&&t&&t.disabled)}function E(e,t){return"disabled"in t&&t.disabled?!1:"value"in t?t.value!=null:e.navigationValue!=null}function g(e,t){t.callback&&t.callback(t.value)}function ne(e,t){if(t.type!=="KEY_DOWN_ENTER")return;let{hiddenInput:a}=t.refs;if(a&&a.form){let n=a.form.querySelector("button:not([type]),[type='submit']");n&&n.click()}}var ct=(0,A.assign)({typeaheadQuery:(e,t)=>(e.typeaheadQuery||"")+t.query}),se=(0,A.assign)({value:(e,t)=>{if(t.type==="UPDATE_AFTER_TYPEAHEAD"&&t.query){let a=Tt(e.options,t.query);if(a&&!a.disabled)return t.callback&&t.callback(a.value),a.value}return e.value}}),Et=(0,A.assign)({navigationValue:(e,t)=>{if(t.type==="UPDATE_AFTER_TYPEAHEAD"&&t.query){let a=Tt(e.options,t.query);if(a&&!a.disabled)return a.value}return e.navigationValue}}),it={["GET_DERIVED_DATA"]:{actions:(0,A.assign)((e,t)=>L(L({},e),t.data))},["VALUE_CHANGE"]:{actions:[f,g]}},Nt=({value:e})=>({id:"listbox",initial:"IDLE",context:{initialValue:e,value:e,options:[],navigationValue:null,typeaheadQuery:null},states:{["IDLE"]:{on:h(L({},it),{["BUTTON_MOUSE_DOWN"]:{target:"OPEN",actions:[X],cond:at},["KEY_DOWN_SPACE"]:{target:"NAVIGATING",actions:[X,O],cond:at},["KEY_DOWN_SEARCH"]:{target:"IDLE",actions:ct,cond:at},["UPDATE_AFTER_TYPEAHEAD"]:{target:"IDLE",actions:[se],cond:at},["CLEAR_TYPEAHEAD"]:{target:"IDLE",actions:s},["KEY_DOWN_NAVIGATE"]:{target:"NAVIGATING",actions:[X,s,O],cond:at},["KEY_DOWN_ENTER"]:{actions:[ne],cond:at},["RESET_VALUE"]:{actions:[ae,g],cond:oe}})},["INTERACTING"]:{entry:[st],on:h(L({},it),{["CLEAR_NAV_SELECTION"]:{actions:[st,O]},["KEY_DOWN_ENTER"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["KEY_DOWN_SPACE"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["BUTTON_MOUSE_DOWN"]:{target:"IDLE",actions:[b]},["KEY_DOWN_ESCAPE"]:{target:"IDLE",actions:[b]},["OPTION_MOUSE_DOWN"]:{target:"DRAGGING"},["OUTSIDE_MOUSE_DOWN"]:[{target:"IDLE",cond:Q,actions:s},{target:"DRAGGING",actions:s,cond:j}],["OUTSIDE_MOUSE_UP"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j},{target:"INTERACTING",actions:s}],["KEY_DOWN_ENTER"]:"INTERACTING",["BLUR"]:[{target:"IDLE",cond:dt,actions:s},{target:"NAVIGATING",cond:bt},{target:"INTERACTING",actions:s}],["OPTION_TOUCH_START"]:{target:"NAVIGATING",actions:[D,s],cond:H},["OPTION_CLICK"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_PRESS"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_MOUSE_ENTER"]:{target:"NAVIGATING",actions:[D,s],cond:H},["KEY_DOWN_NAVIGATE"]:{target:"NAVIGATING",actions:[D,s,O]}})},["OPEN"]:{on:h(L({},it),{["CLEAR_NAV_SELECTION"]:{actions:[st]},["KEY_DOWN_ENTER"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["KEY_DOWN_SPACE"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["BUTTON_MOUSE_DOWN"]:{target:"IDLE",actions:[b]},["KEY_DOWN_ESCAPE"]:{target:"IDLE",actions:[b]},["OPTION_MOUSE_DOWN"]:{target:"DRAGGING"},["OUTSIDE_MOUSE_DOWN"]:[{target:"IDLE",cond:Q,actions:s},{target:"DRAGGING",cond:j},{target:"INTERACTING",actions:s}],["OUTSIDE_MOUSE_UP"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j},{target:"INTERACTING",actions:s}],["BLUR"]:[{target:"IDLE",cond:dt,actions:s},{target:"NAVIGATING",cond:bt},{target:"INTERACTING",actions:s}],["BUTTON_MOUSE_UP"]:{target:"NAVIGATING",actions:[X,O]},["LIST_MOUSE_UP"]:{target:"NAVIGATING",actions:[X,O]},["OPTION_TOUCH_START"]:{target:"NAVIGATING",actions:[D,s],cond:H},["OPTION_CLICK"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_PRESS"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["KEY_DOWN_NAVIGATE"]:{target:"NAVIGATING",actions:[D,s,O]},["KEY_DOWN_SEARCH"]:{target:"NAVIGATING",actions:ct},["UPDATE_AFTER_TYPEAHEAD"]:{actions:[Et]},["CLEAR_TYPEAHEAD"]:{actions:s},["OPTION_MOUSE_MOVE"]:[{target:"DRAGGING",actions:[D],cond:H},{target:"DRAGGING"}]})},["DRAGGING"]:{on:h(L({},it),{["CLEAR_NAV_SELECTION"]:{actions:[st]},["KEY_DOWN_ENTER"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["KEY_DOWN_SPACE"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["BUTTON_MOUSE_DOWN"]:{target:"IDLE",actions:[b]},["KEY_DOWN_ESCAPE"]:{target:"IDLE",actions:[b]},["OPTION_MOUSE_DOWN"]:{target:"DRAGGING"},["OUTSIDE_MOUSE_DOWN"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j},{target:"INTERACTING",actions:s}],["OUTSIDE_MOUSE_UP"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j,actions:O},{target:"INTERACTING",actions:[s,O]}],["BLUR"]:[{target:"IDLE",cond:dt,actions:s},{target:"NAVIGATING",cond:bt},{target:"INTERACTING",actions:s}],["BUTTON_MOUSE_UP"]:{target:"NAVIGATING",actions:[X,O]},["OPTION_TOUCH_START"]:{target:"NAVIGATING",actions:[D,s],cond:H},["OPTION_CLICK"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_PRESS"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_MOUSE_ENTER"]:{target:"DRAGGING",actions:[D,s],cond:H},["KEY_DOWN_NAVIGATE"]:{target:"NAVIGATING",actions:[D,s,O]},["KEY_DOWN_SEARCH"]:{target:"NAVIGATING",actions:ct},["UPDATE_AFTER_TYPEAHEAD"]:{actions:[Et]},["CLEAR_TYPEAHEAD"]:{actions:s},["OPTION_MOUSE_MOVE"]:[{target:"NAVIGATING",actions:[D],cond:H},{target:"NAVIGATING"}],["OPTION_MOUSE_UP"]:{target:"IDLE",actions:[f,s,b,g],cond:E}})},["NAVIGATING"]:{on:h(L({},it),{["CLEAR_NAV_SELECTION"]:{actions:[st,O]},["KEY_DOWN_ENTER"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["KEY_DOWN_SPACE"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["BUTTON_MOUSE_DOWN"]:{target:"IDLE",actions:[b]},["KEY_DOWN_ESCAPE"]:{target:"IDLE",actions:[b]},["OPTION_MOUSE_DOWN"]:{target:"DRAGGING"},["OUTSIDE_MOUSE_DOWN"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j},{target:"INTERACTING",actions:s}],["OUTSIDE_MOUSE_UP"]:[{target:"IDLE",cond:Q,actions:s},{target:"NAVIGATING",cond:j},{target:"INTERACTING",actions:s}],["BLUR"]:[{target:"IDLE",cond:dt,actions:s},{target:"NAVIGATING",cond:bt},{target:"INTERACTING",actions:s}],["BUTTON_MOUSE_UP"]:{target:"NAVIGATING",actions:[X,O]},["OPTION_TOUCH_START"]:{target:"NAVIGATING",actions:[D,s],cond:H},["OPTION_CLICK"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_PRESS"]:{target:"IDLE",actions:[f,s,b,g],cond:E},["OPTION_MOUSE_ENTER"]:{target:"NAVIGATING",actions:[D,s],cond:H},["KEY_DOWN_NAVIGATE"]:{target:"NAVIGATING",actions:[D,s,O]},["KEY_DOWN_SEARCH"]:{target:"NAVIGATING",actions:ct},["UPDATE_AFTER_TYPEAHEAD"]:{actions:[Et]},["CLEAR_TYPEAHEAD"]:{actions:s},["OPTION_MOUSE_MOVE"]:[{target:"NAVIGATING",actions:[D],cond:H},{target:"NAVIGATING"}]})}}});function Tt(e,t=""){return t&&e.find(n=>!n.disabled&&n.label&&n.label.toLowerCase().startsWith(t.toLowerCase()))||null}function ie(e,t){return e?t.find(a=>a.value===e):void 0}var le=!1,pt=(0,C.createDescendantContext)("ListboxDescendantContext"),W=(0,i.createNamedContext)("ListboxContext",{}),Pt=(0,i.createNamedContext)("ListboxGroupContext",{}),wt=o.forwardRef(function(q,J){var B=q,{as:t="div","aria-labelledby":a,"aria-label":n,children:l,defaultValue:r,disabled:p=!1,form:x,name:y,onChange:u,required:R,value:v,__componentName:w="ListboxInput"}=B,d=F(B,["as","aria-labelledby","aria-label","children","defaultValue","disabled","form","name","onChange","required","value","__componentName"]);let P=o.useRef(v!=null),[I,k]=(0,C.useDescendantsInit)(),m=o.useRef(null),Y=o.useRef(null),V=o.useRef(null),$=o.useRef(null),Z=o.useRef(null),_=o.useRef(null),z=o.useRef(null),K=(0,Lt.useCreateMachine)(Nt({value:(P.current?v:r)||null})),[S,M]=(0,Lt.useMachine)(K,{button:m,hiddenInput:Y,highlightedOption:V,input:$,list:Z,popover:_,selectedOption:z},le);function lt(c){c!==S.context.value&&(u==null||u(c))}let gt=(0,yt.useId)(d.id),ot=d.id||(0,i.makeId)("listbox-input",gt),ft=(0,i.useComposedRefs)($,J),tt=o.useMemo(()=>{let c=I.find(T=>T.value===S.context.value);return c?c.label:null},[I,S.context.value]),N=ue(S.value),vt={ariaLabel:n,ariaLabelledBy:a,buttonRef:m,disabled:p,highlightedOptionRef:V,isExpanded:N,listboxId:ot,listboxValueLabel:tt,listRef:Z,onValueChange:lt,popoverRef:_,selectedOptionRef:z,send:M,state:S.value,stateData:S.context},rt=o.useRef(!1);if(!P.current&&r==null&&!rt.current&&I.length){rt.current=!0;let c=I.find(T=>!T.disabled);c&&c.value&&M({type:"VALUE_CHANGE",value:c.value})}return(0,i.useControlledSwitchWarning)(v,"value",w),de(v,S.context.value,()=>{M({type:"VALUE_CHANGE",value:v})}),(0,i.useIsomorphicLayoutEffect)(()=>{M({type:"GET_DERIVED_DATA",data:{options:I}})},[I,M]),o.useEffect(()=>{function c(T){let{target:G,relatedTarget:et}=T;Ct(_.current,G)||M({type:"OUTSIDE_MOUSE_DOWN",relatedTarget:et||G})}return N&&window.addEventListener("mousedown",c),()=>{window.removeEventListener("mousedown",c)}},[M,N]),o.useEffect(()=>{function c(T){let{target:G,relatedTarget:et}=T;Ct(_.current,G)||M({type:"OUTSIDE_MOUSE_UP",relatedTarget:et||G})}return N&&window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[M,N]),o.useEffect(()=>{var G;let c=(G=Y.current)==null?void 0:G.form;if(!c)return;function T(et){M({type:"RESET_VALUE",isControlled:P.current})}return c.addEventListener("reset",T),()=>{c==null||c.removeEventListener("reset",T)}},[$,P,M]),o.createElement(t,h(L({},d),{ref:ft,"data-reach-listbox-input":"","data-state":N?"expanded":"closed","data-value":S.context.value,id:ot}),o.createElement(W.Provider,{value:vt},o.createElement(C.DescendantProvider,{context:pt,items:I,set:k},(0,i.isFunction)(l)?l({id:ot,isExpanded:N,value:S.context.value,selectedOptionRef:z,highlightedOptionRef:V,valueLabel:tt,expanded:N}):l,(x||y||R)&&o.createElement("input",{ref:Y,"data-reach-listbox-hidden-input":"",disabled:p,form:x,name:y,readOnly:!0,required:R,tabIndex:-1,type:"hidden",value:S.context.value||""}))))});wt.displayName="ListboxInput";var Vt=o.forwardRef(function(x,p){var y=x,{arrow:t="\u25BC",button:a,children:n,portal:l=!0}=y,r=F(y,["arrow","button","children","portal"]);return o.createElement(wt,h(L({},r),{__componentName:"Listbox",ref:p}),({value:u,valueLabel:R})=>o.createElement(o.Fragment,null,o.createElement(Kt,{arrow:t,children:a?(0,i.isFunction)(a)?a({value:u,label:R}):a:void 0}),o.createElement(kt,{portal:l},o.createElement(Rt,null,n))))});Vt.displayName="Listbox";var _t=o.forwardRef(function(R,u){var v=R,{"aria-label":t,arrow:a=!1,as:n="span",children:l,onKeyDown:r,onMouseDown:p,onMouseUp:x}=v,y=F(v,["aria-label","arrow","as","children","onKeyDown","onMouseDown","onMouseUp"]);let{buttonRef:w,send:d,ariaLabelledBy:J,disabled:q,isExpanded:B,listboxId:P,stateData:I,listboxValueLabel:k}=o.useContext(W),m=I.value,Y=(0,i.useComposedRefs)(w,u),V=Ht();function $(K){(0,i.isRightClick)(K.nativeEvent)||(K.preventDefault(),K.stopPropagation(),d({type:"BUTTON_MOUSE_DOWN",disabled:q}))}function Z(K){(0,i.isRightClick)(K.nativeEvent)||(K.preventDefault(),K.stopPropagation(),d({type:"BUTTON_MOUSE_UP"}))}let _=(0,i.makeId)("button",P),z=o.useMemo(()=>{if(l){if((0,i.isFunction)(l))return l({isExpanded:B,label:k,value:m,expanded:B})}else return k;return l},[l,k,B,m]);return o.createElement(n,h(L({"aria-disabled":q||void 0,"aria-expanded":B||void 0,"aria-haspopup":"listbox","aria-labelledby":t?void 0:[J,_].filter(Boolean).join(" "),"aria-label":t,role:"button",tabIndex:q?-1:0},y),{ref:Y,"data-reach-listbox-button":"",id:_,onKeyDown:(0,i.composeEventHandlers)(r,V),onMouseDown:(0,i.composeEventHandlers)(p,$),onMouseUp:(0,i.composeEventHandlers)(x,Z)}),z,a&&o.createElement(At,null,(0,i.isBoolean)(a)?null:a))});_t.displayName="ListboxButton";var Kt=o.memo(_t),Ut=o.forwardRef(function(r,l){var p=r,{as:t="span",children:a}=p,n=F(p,["as","children"]);let{isExpanded:x}=o.useContext(W);return o.createElement(t,h(L({"aria-hidden":!0},n),{ref:l,"data-reach-listbox-arrow":"","data-expanded":x?"":void 0}),(0,i.isFunction)(a)?a({isExpanded:x,expanded:x}):a||"\u25BC")});Ut.displayName="ListboxArrow";var At=o.memo(Ut),Bt=o.forwardRef(function(R,u){var v=R,{as:t="div",position:a=xt.positionMatchWidth,onBlur:n,onKeyDown:l,onMouseUp:r,portal:p=!0,unstable_observableRefs:x}=v,y=F(v,["as","position","onBlur","onKeyDown","onMouseUp","portal","unstable_observableRefs"]);let{isExpanded:w,buttonRef:d,popoverRef:J,send:q}=o.useContext(W),B=(0,i.useComposedRefs)(J,u),P=Ht();function I(){q({type:"LIST_MOUSE_UP"})}let k=h(L({hidden:!w,tabIndex:-1},y),{ref:B,"data-reach-listbox-popover":"",onMouseUp:(0,i.composeEventHandlers)(r,I),onBlur:(0,i.composeEventHandlers)(n,m),onKeyDown:(0,i.composeEventHandlers)(l,P)});function m(Y){let{nativeEvent:V}=Y;requestAnimationFrame(()=>{q({type:"BLUR",relatedTarget:V.relatedTarget||V.target})})}return p?o.createElement(xt.Popover,h(L({},k),{as:t,targetRef:d,position:a,unstable_observableRefs:x,unstable_skipInitialPortalRender:!0})):o.createElement(t,L({},k))});Bt.displayName="ListboxPopover";var kt=o.memo(Bt),Rt=o.forwardRef(function(l,n){var r=l,{as:t="ul"}=r,a=F(r,["as"]);let{listRef:p,ariaLabel:x,ariaLabelledBy:y,isExpanded:u,listboxId:R,stateData:{value:v,navigationValue:w}}=o.useContext(W),d=(0,i.useComposedRefs)(n,p);return o.createElement(t,h(L({"aria-activedescendant":Wt(u?w:v),"aria-labelledby":x?void 0:y,"aria-label":x,role:"listbox",tabIndex:-1},a),{ref:d,"data-reach-listbox-list":"",id:(0,i.makeId)("listbox",R)}))});Rt.displayName="ListboxList";var Gt=o.forwardRef(function(B,q){var P=B,{as:t="li",children:a,disabled:n,index:l,label:r,onClick:p,onMouseDown:x,onMouseEnter:y,onMouseLeave:u,onMouseMove:R,onMouseUp:v,onTouchStart:w,value:d}=P,J=F(P,["as","children","disabled","index","label","onClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseUp","onTouchStart","value"]);let{highlightedOptionRef:I,selectedOptionRef:k,send:m,isExpanded:Y,onValueChange:V,state:$,stateData:{value:Z,navigationValue:_}}=o.useContext(W),[z,K]=o.useState(r),S=r||z||"",M=o.useRef(null),[lt,gt]=(0,i.useStatefulRefValue)(M,null),ot=o.useMemo(()=>({element:lt,value:d,label:S,disabled:!!n}),[n,lt,S,d]);(0,C.useDescendant)(ot,pt,l);let ft=o.useCallback(U=>{!r&&U&&K(St=>U.textContent&&St!==U.textContent?U.textContent:St||"")},[r]),tt=_?_===d:!1,N=Z===d,vt=(0,i.useComposedRefs)(ft,q,gt,N?k:null,tt?I:null);function rt(){m({type:"OPTION_MOUSE_ENTER",value:d,disabled:!!n})}function c(){m({type:"OPTION_TOUCH_START",value:d,disabled:!!n})}function T(){m({type:"CLEAR_NAV_SELECTION"})}function G(U){(0,i.isRightClick)(U.nativeEvent)||(U.preventDefault(),m({type:"OPTION_MOUSE_DOWN"}))}function et(U){(0,i.isRightClick)(U.nativeEvent)||m({type:"OPTION_MOUSE_UP",value:d,callback:V,disabled:!!n})}function qt(U){(0,i.isRightClick)(U.nativeEvent)||m({type:"OPTION_CLICK",value:d,callback:V,disabled:!!n})}function Yt(){($==="OPEN"||_!==d)&&m({type:"OPTION_MOUSE_MOVE",value:d,disabled:!!n})}return o.createElement(t,h(L({"aria-selected":(Y?tt:N)||void 0,"aria-disabled":n||void 0,role:"option"},J),{ref:vt,id:Wt(d),"data-reach-listbox-option":"","data-current-nav":tt?"":void 0,"data-current-selected":N?"":void 0,"data-label":S,"data-value":d,onClick:(0,i.composeEventHandlers)(p,qt),onMouseDown:(0,i.composeEventHandlers)(x,G),onMouseEnter:(0,i.composeEventHandlers)(y,rt),onMouseLeave:(0,i.composeEventHandlers)(u,T),onMouseMove:(0,i.composeEventHandlers)(R,Yt),onMouseUp:(0,i.composeEventHandlers)(v,et),onTouchStart:(0,i.composeEventHandlers)(w,c)}),a)});Gt.displayName="ListboxOption";var Ft=o.forwardRef(function(p,r){var x=p,{as:t="div",label:a,children:n}=x,l=F(x,["as","label","children"]);let{listboxId:y}=o.useContext(W),u=(0,i.makeId)("label",(0,yt.useId)(l.id),y);return o.createElement(Pt.Provider,{value:{labelId:u}},o.createElement(t,h(L({"aria-labelledby":u,role:"group"},l),{"data-reach-listbox-group":"",ref:r}),a&&o.createElement(mt,null,a),n))});Ft.displayName="ListboxGroup";var mt=o.forwardRef(function(l,n){var r=l,{as:t="span"}=r,a=F(r,["as"]);let{labelId:p}=o.useContext(Pt);return o.createElement(t,h(L({role:"presentation"},a),{ref:n,"data-reach-listbox-group-label":"",id:p}))});mt.displayName="ListboxGroupLabel";function re(){let{highlightedOptionRef:e,selectedOptionRef:t,listboxId:a,listboxValueLabel:n,isExpanded:l,stateData:{value:r}}=o.useContext(W);return o.useMemo(()=>({id:a,isExpanded:l,selectedOptionRef:t,highlightedOptionRef:e,value:r,valueLabel:n}),[a,l,r,n,t,e])}function ue(e){return["NAVIGATING","OPEN","DRAGGING","INTERACTING"].includes(e)}function Ht(){let{send:e,disabled:t,onValueChange:a,stateData:{navigationValue:n,typeaheadQuery:l}}=o.useContext(W),r=(0,C.useDescendants)(pt),p=(0,i.useStableCallback)(a);o.useEffect(()=>{l&&e({type:"UPDATE_AFTER_TYPEAHEAD",query:l,callback:p});let u=window.setTimeout(()=>{l!=null&&e({type:"CLEAR_TYPEAHEAD"})},1e3);return()=>{window.clearTimeout(u)}},[p,e,l]);let x=r.findIndex(({value:u})=>u===n);return(0,i.composeEventHandlers)(function(u){let{key:R}=u,v=(0,i.isString)(R)&&R.length===1,w=r.find(d=>d.value===n);switch(R){case"Enter":e({type:"KEY_DOWN_ENTER",value:n,callback:a,disabled:!!((w==null?void 0:w.disabled)||t)});return;case" ":u.preventDefault(),e({type:"KEY_DOWN_SPACE",value:n,callback:a,disabled:!!((w==null?void 0:w.disabled)||t)});return;case"Escape":e({type:"KEY_DOWN_ESCAPE"});return;case"Tab":let d=u.shiftKey?"KEY_DOWN_SHIFT_TAB":"KEY_DOWN_TAB";e({type:d});return;default:v&&e({type:"KEY_DOWN_SEARCH",query:R,disabled:t});return}},(0,C.useDescendantKeyDown)(pt,{currentIndex:x,orientation:"vertical",key:"index",rotate:!0,filter:u=>!u.disabled,callback(u){e({type:"KEY_DOWN_NAVIGATE",value:r[u].value,disabled:t})}}))}function Wt(e){let{listboxId:t}=o.useContext(W);return e?(0,i.makeId)(`option-${e}`,t):void 0}function Ct(e,t){return!!(e&&e.contains(t))}function de(e,t,a){let{current:n}=o.useRef(e!=null);n&&e!==t&&a()}0&&(module.exports={Listbox,ListboxArrow,ListboxButton,ListboxGroup,ListboxGroupLabel,ListboxInput,ListboxList,ListboxOption,ListboxPopover,useListboxContext});
